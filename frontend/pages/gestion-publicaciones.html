<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Publicaciones - Rueda de Negocios</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <nav class="navbar">
        <div class="container navbar-content">
            <a href="admin-dashboard.html" class="logo">EventConnect Admin</a>
            <div class="nav-links">
                <span style="color: var(--text-secondary);">Administrador</span>
            </div>
        </div>
    </nav>

    <div class="dashboard-grid">
        <main>
            <div class="card">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 0;">üì∞ Gesti√≥n de Publicaciones</h2>
                    <button onclick="volver()" class="btn btn-secondary" style="padding: 8px 16px;">
                        ‚¨Ö Volver al panel
                    </button>
                </div>
                <p style="margin-bottom: 2rem;">Revisa y aprueba las publicaciones de eventos enviadas por los organizadores.</p>

                <!-- Filtros -->
                <div class="filtros-publicaciones" style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
                    <select class="form-control" style="max-width: 200px;" id="filtroEstado">
                        <option value="todos">Todos los estados</option>
                        <option value="pendiente" selected>Pendientes</option>
                        <option value="aprobado">Aprobados</option>
                        <option value="rechazado">Rechazados</option>
                    </select>
                    <input type="text" class="form-control" placeholder="Buscar por nombre..." 
                           style="max-width: 300px;" id="busquedaPublicacion">
                </div>

                <!-- Grid de tarjetas de publicaciones -->
                <div class="eventos-grid" id="publicacionesGrid">
                    
                    <!-- Evento 1 - Pendiente -->
                    <div class="evento-card" data-estado="pendiente">
                        <div class="evento-card-header">
                            <span class="evento-categoria">üè¢ Networking</span>
                            <span class="status-badge status-pending">Pendiente</span>
                        </div>
                        <h3 class="evento-titulo">Feria de Proveedores 2025</h3>
                        <p class="evento-descripcion">Conecta con m√°s de 50 proveedores nacionales e internacionales. Oportunidad √∫nica para establecer alianzas estrat√©gicas y conocer las √∫ltimas tendencias del mercado...</p>
                        <div class="evento-meta">
                            <span>üìÖ 15 Enero, 2025</span>
                            <span>üìç Centro de Convenciones</span>
                        </div>
                        <div class="evento-organizador">
                            <small>Organizado por: <strong>C√°mara de Comercio</strong></small>
                        </div>
                        <div class="evento-actions">
                            <button class="btn btn-secondary" onclick="verDetalles(1)">üëÅ Ver detalles</button>
                            <button class="btn btn-success" onclick="aprobarEvento(1)">‚úì Aprobar</button>
                            <button class="btn btn-danger" onclick="rechazarEvento(1)" style="padding: 12px 16px;">‚úï</button>
                        </div>
                    </div>

                    <!-- Evento 2 - Pendiente -->
                    <div class="evento-card" data-estado="pendiente">
                        <div class="evento-card-header">
                            <span class="evento-categoria">üíº Comercio</span>
                            <span class="status-badge status-pending">Pendiente</span>
                        </div>
                        <h3 class="evento-titulo">Expo Importadores Latam</h3>
                        <p class="evento-descripcion">El evento m√°s grande de importadores de Latinoam√©rica. Presenta tus productos a compradores de toda la regi√≥n y expande tu negocio internacionalmente...</p>
                        <div class="evento-meta">
                            <span>üìÖ 22 Febrero, 2025</span>
                            <span>üìç Hotel Marriott</span>
                        </div>
                        <div class="evento-organizador">
                            <small>Organizado por: <strong>Trade Alliance</strong></small>
                        </div>
                        <div class="evento-actions">
                            <button class="btn btn-secondary" onclick="verDetalles(2)">üëÅ Ver detalles</button>
                            <button class="btn btn-success" onclick="aprobarEvento(2)">‚úì Aprobar</button>
                            <button class="btn btn-danger" onclick="rechazarEvento(2)" style="padding: 12px 16px;">‚úï</button>
                        </div>
                    </div>

                    <!-- Evento 3 - Pendiente -->
                    <div class="evento-card" data-estado="pendiente">
                        <div class="evento-card-header">
                            <span class="evento-categoria">üöÄ Tecnolog√≠a</span>
                            <span class="status-badge status-pending">Pendiente</span>
                        </div>
                        <h3 class="evento-titulo">Tech Business Summit</h3>
                        <p class="evento-descripcion">Descubre las √∫ltimas innovaciones tecnol√≥gicas para tu negocio. Startups, inversores y empresas consolidadas en un mismo lugar para crear sinergias...</p>
                        <div class="evento-meta">
                            <span>üìÖ 10 Marzo, 2025</span>
                            <span>üìç Campus Tech Hub</span>
                        </div>
                        <div class="evento-organizador">
                            <small>Organizado por: <strong>TechConnect Inc.</strong></small>
                        </div>
                        <div class="evento-actions">
                            <button class="btn btn-secondary" onclick="verDetalles(3)">üëÅ Ver detalles</button>
                            <button class="btn btn-success" onclick="aprobarEvento(3)">‚úì Aprobar</button>
                            <button class="btn btn-danger" onclick="rechazarEvento(3)" style="padding: 12px 16px;">‚úï</button>
                        </div>
                    </div>

                    <!-- Evento 4 - Pendiente -->
                    <div class="evento-card" data-estado="pendiente">
                        <div class="evento-card-header">
                            <span class="evento-categoria">üå± Sostenibilidad</span>
                            <span class="status-badge status-pending">Pendiente</span>
                        </div>
                        <h3 class="evento-titulo">Green Commerce Forum</h3>
                        <p class="evento-descripcion">Foro dedicado a empresas con enfoque sostenible. Aprende sobre pr√°cticas eco-amigables y conecta con proveedores certificados en comercio verde...</p>
                        <div class="evento-meta">
                            <span>üìÖ 5 Abril, 2025</span>
                            <span>üìç Parque Empresarial Verde</span>
                        </div>
                        <div class="evento-organizador">
                            <small>Organizado por: <strong>EcoTrade Foundation</strong></small>
                        </div>
                        <div class="evento-actions">
                            <button class="btn btn-secondary" onclick="verDetalles(4)">üëÅ Ver detalles</button>
                            <button class="btn btn-success" onclick="aprobarEvento(4)">‚úì Aprobar</button>
                            <button class="btn btn-danger" onclick="rechazarEvento(4)" style="padding: 12px 16px;">‚úï</button>
                        </div>
                    </div>

                    <!-- Evento 5 - Aprobado -->
                    <div class="evento-card" data-estado="aprobado" style="display: none;">
                        <div class="evento-card-header">
                            <span class="evento-categoria">üçΩ Gastronom√≠a</span>
                            <span class="status-badge status-approved">Aprobado</span>
                        </div>
                        <h3 class="evento-titulo">Food Business Expo</h3>
                        <p class="evento-descripcion">El punto de encuentro para el sector gastron√≥mico. Productores, distribuidores y restaurantes se re√∫nen para crear nuevas oportunidades de negocio...</p>
                        <div class="evento-meta">
                            <span>üìÖ 20 Diciembre, 2024</span>
                            <span>üìç Centro Gastron√≥mico</span>
                        </div>
                        <div class="evento-organizador">
                            <small>Organizado por: <strong>Gourmet Alliance</strong></small>
                        </div>
                        <div class="evento-actions">
                            <button class="btn btn-secondary" onclick="verDetalles(5)">üëÅ Ver detalles</button>
                            <span style="color: var(--success-color); font-weight: 600;">‚úì Evento publicado</span>
                        </div>
                    </div>

                </div>

                <!-- Mensaje cuando no hay resultados -->
                <div id="sinResultados" style="display: none; text-align: center; padding: 3rem;">
                    <p style="font-size: 1.2rem; color: var(--text-secondary);">No se encontraron publicaciones con esos criterios.</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de detalles -->
    <div class="modal" id="modalDetalles">
        <div class="modal-content" style="max-width: 600px;">
            <h3 id="modalTitulo">Detalles del Evento</h3>
            <div id="modalContenido"></div>
            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="cerrarModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        const token = localStorage.getItem("token");
        const role = localStorage.getItem("userRole");

        if (!token || role !== "adminSistema") {
            window.location.href = "login.html";
        }

        function cerrarSesion() {
            localStorage.clear();
            window.location.href = "login.html";
        }

        function volver() {
            window.location.href = "admin-dashboard.html";
        }

        // Datos de eventos (simulados)
        const eventosData = {
            1: {
                titulo: "Feria de Proveedores 2025",
                descripcion: "Conecta con m√°s de 50 proveedores nacionales e internacionales. Oportunidad √∫nica para establecer alianzas estrat√©gicas y conocer las √∫ltimas tendencias del mercado. El evento incluye conferencias magistrales, mesas de negociaci√≥n programadas y networking exclusivo.",
                fecha: "15 Enero, 2025",
                hora: "9:00 AM - 6:00 PM",
                lugar: "Centro de Convenciones de la Ciudad",
                organizador: "C√°mara de Comercio",
                contacto: "eventos@camaracomercio.com",
                capacidad: "500 participantes",
                categoria: "Networking"
            },
            2: {
                titulo: "Expo Importadores Latam",
                descripcion: "El evento m√°s grande de importadores de Latinoam√©rica. Presenta tus productos a compradores de toda la regi√≥n y expande tu negocio internacionalmente. Incluye ruedas de negocios B2B y acceso a la base de datos de importadores.",
                fecha: "22 Febrero, 2025",
                hora: "10:00 AM - 8:00 PM",
                lugar: "Hotel Marriott - Sal√≥n Principal",
                organizador: "Trade Alliance",
                contacto: "info@tradealliance.com",
                capacidad: "300 participantes",
                categoria: "Comercio"
            },
            3: {
                titulo: "Tech Business Summit",
                descripcion: "Descubre las √∫ltimas innovaciones tecnol√≥gicas para tu negocio. Startups, inversores y empresas consolidadas en un mismo lugar para crear sinergias. Pitch sessions, demo zone y oportunidades de inversi√≥n.",
                fecha: "10 Marzo, 2025",
                hora: "8:00 AM - 5:00 PM",
                lugar: "Campus Tech Hub",
                organizador: "TechConnect Inc.",
                contacto: "summit@techconnect.io",
                capacidad: "400 participantes",
                categoria: "Tecnolog√≠a"
            },
            4: {
                titulo: "Green Commerce Forum",
                descripcion: "Foro dedicado a empresas con enfoque sostenible. Aprende sobre pr√°cticas eco-amigables y conecta con proveedores certificados en comercio verde. Certificaciones, talleres pr√°cticos y expo de productos sostenibles.",
                fecha: "5 Abril, 2025",
                hora: "9:00 AM - 4:00 PM",
                lugar: "Parque Empresarial Verde",
                organizador: "EcoTrade Foundation",
                contacto: "foro@ecotrade.org",
                capacidad: "250 participantes",
                categoria: "Sostenibilidad"
            },
            5: {
                titulo: "Food Business Expo",
                descripcion: "El punto de encuentro para el sector gastron√≥mico. Productores, distribuidores y restaurantes se re√∫nen para crear nuevas oportunidades de negocio. Degustaciones, showcooking y ruedas de proveedores.",
                fecha: "20 Diciembre, 2024",
                hora: "11:00 AM - 9:00 PM",
                lugar: "Centro Gastron√≥mico",
                organizador: "Gourmet Alliance",
                contacto: "expo@gourmetalliance.com",
                capacidad: "350 participantes",
                categoria: "Gastronom√≠a"
            }
        };

        function verDetalles(id) {
            const evento = eventosData[id];
            document.getElementById('modalTitulo').textContent = evento.titulo;
            document.getElementById('modalContenido').innerHTML = `
                <div class="info-grid" style="margin-bottom: 1rem;">
                    <div class="info-card">
                        <div class="info-card-icon">üìÖ</div>
                        <div class="info-card-content">
                            <span class="info-label">Fecha</span>
                            <span class="info-value">${evento.fecha}</span>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-card-icon">üïê</div>
                        <div class="info-card-content">
                            <span class="info-label">Horario</span>
                            <span class="info-value">${evento.hora}</span>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-card-icon">üìç</div>
                        <div class="info-card-content">
                            <span class="info-label">Ubicaci√≥n</span>
                            <span class="info-value">${evento.lugar}</span>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-card-icon">üë•</div>
                        <div class="info-card-content">
                            <span class="info-label">Capacidad</span>
                            <span class="info-value">${evento.capacidad}</span>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <h4 style="margin-bottom: 0.5rem;">Descripci√≥n</h4>
                    <p>${evento.descripcion}</p>
                </div>
                <div class="docs-grid">
                    <div class="doc-item">
                        <span class="doc-label">Organizador</span>
                        <span class="doc-value">${evento.organizador}</span>
                    </div>
                    <div class="doc-item">
                        <span class="doc-label">Contacto</span>
                        <span class="doc-value">${evento.contacto}</span>
                    </div>
                </div>
            `;
            document.getElementById('modalDetalles').style.display = 'block';
        }

        function cerrarModal() {
            document.getElementById('modalDetalles').style.display = 'none';
        }

        function aprobarEvento(id) {
            if (confirm('¬øEst√°s seguro de aprobar este evento?')) {
                const card = document.querySelector(`[onclick="aprobarEvento(${id})"]`).closest('.evento-card');
                const badge = card.querySelector('.status-badge');
                badge.className = 'status-badge status-approved';
                badge.textContent = 'Aprobado';
                card.dataset.estado = 'aprobado';
                
                const actionsDiv = card.querySelector('.evento-actions');
                actionsDiv.innerHTML = `
                    <button class="btn btn-secondary" onclick="verDetalles(${id})">üëÅ Ver detalles</button>
                    <span style="color: var(--success-color); font-weight: 600;">‚úì Evento publicado</span>
                `;
                
                alert('Evento aprobado y publicado exitosamente.');
            }
        }

        function rechazarEvento(id) {
            const motivo = prompt('Ingresa el motivo del rechazo:');
            if (motivo) {
                const card = document.querySelector(`[onclick="rechazarEvento(${id})"]`).closest('.evento-card');
                const badge = card.querySelector('.status-badge');
                badge.className = 'status-badge status-rejected';
                badge.textContent = 'Rechazado';
                card.dataset.estado = 'rechazado';
                
                const actionsDiv = card.querySelector('.evento-actions');
                actionsDiv.innerHTML = `
                    <button class="btn btn-secondary" onclick="verDetalles(${id})">üëÅ Ver detalles</button>
                    <span style="color: var(--danger-color); font-weight: 600;">‚úï Rechazado</span>
                `;
                
                alert('Evento rechazado. Se notificar√° al organizador.');
            }
        }

        // Filtros
        document.getElementById('filtroEstado').addEventListener('change', filtrarPublicaciones);
        document.getElementById('busquedaPublicacion').addEventListener('input', filtrarPublicaciones);

        function filtrarPublicaciones() {
            const estado = document.getElementById('filtroEstado').value;
            const busqueda = document.getElementById('busquedaPublicacion').value.toLowerCase();
            const cards = document.querySelectorAll('.evento-card');
            let visibles = 0;

            cards.forEach(card => {
                const cardEstado = card.dataset.estado;
                const titulo = card.querySelector('.evento-titulo').textContent.toLowerCase();
                
                const cumpleEstado = estado === 'todos' || cardEstado === estado;
                const cumpleBusqueda = titulo.includes(busqueda);

                if (cumpleEstado && cumpleBusqueda) {
                    card.style.display = 'block';
                    visibles++;
                } else {
                    card.style.display = 'none';
                }
            });

            document.getElementById('sinResultados').style.display = visibles === 0 ? 'block' : 'none';
        }

        // Click fuera del modal para cerrar
        window.onclick = function(event) {
            const modal = document.getElementById('modalDetalles');
            if (event.target === modal) {
                cerrarModal();
            }
        }
    </script>
    <script src="../js/components/sidebar-admin.js"></script>
</body>

</html>
